(this["webpackJsonppayoneer-task"]=this["webpackJsonppayoneer-task"]||[]).push([[0],{235:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(15),o=a.n(i),s=a(9),l=a(36),u=a(6),j=a(20),d=a(40),p=a.n(d),b=a(56),h="https://api.openweathermap.org/data/2.5",O="75f972b80e26f14fe6c920aa6a85ad57",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var a in e)t.push("".concat(a,"=").concat(encodeURIComponent(e[a])));return t.push("appid=".concat(encodeURIComponent(O))),t.join("&")},m=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"Delhi,in",a=f({q:t,cnt:40}),e.next=4,fetch("".concat(h,"/forecast?").concat(a));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Unable to fetch forecast");case 7:return e.abrupt("return",n.json());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=a(12),g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=function(e){return parseInt(e)},w=function(e){var t=e.split(" ")[0].split("-").map(v),a=Object(x.a)(t,3),n=a[0],c=a[1],r=a[2];return"".concat(r," ").concat(g[c-1]," ").concat("".concat(n).slice(-2))},y=Object(l.b)("data/fetchForecast",function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:if("200"===(a=e.sent).cod){e.next=5;break}throw new Error("Error in forecast - ".concat(a.cod," - ").concat(a.message));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(l.c)({name:"data",initialState:{loading:!0,error:null,forecast:null},extraReducers:(n={},Object(u.a)(n,y.fulfilled,(function(e,t){for(var a=t.payload.list,n={},c=0;c<a.length;c++){var r=w(a[c].dt_txt);n[r]=n[r]||[],n[r].push(a[c])}var i=[];for(var o in n)i.push({day:o,data:n[o]});e.loading=!1,e.forecast=Object(j.a)(Object(j.a)({},t.payload),{},{list:i})})),Object(u.a)(n,y.rejected,(function(e){e.error={message:"Unable to get forecast. Please refresh and try again."}})),n)}),I=function(e){return e.data.loading},S=function(e){return e.data.error},C=function(e){return e.data.forecast},z=k.reducer,M=function(e,t,a){return e>=a?a-1:e<t?t:e},F=function(e,t){return t.count-e.count},N=Object(l.c)({name:"display",initialState:{unit:"F",pageSize:3,pageIndex:0,active:0},reducers:{switchUnit:function(e,t){e.unit=["F","C"].includes(t.payload)?t.payload:"F"},setPageSize:function(e,t){e.pageSize=Math.min(t.payload,3),e.pageIndex+e.pageSize-1>e.active&&(e.pageIndex=Math.max(0,e.active-e.pageSize+1)),e.active=M(e.active,e.pageIndex,e.pageIndex+e.pageSize)},prevPage:function(e){e.pageIndex=Math.max(0,e.pageIndex-1),e.active=M(e.active,e.pageIndex,e.pageIndex+e.pageSize)},nextPage:function(e,t){e.pageIndex=Math.min(t.payload.length-e.pageSize,e.pageIndex+1),e.active=M(e.active,e.pageIndex,e.pageIndex+e.pageSize)},activate:function(e,t){e.active=M(t.payload,e.pageIndex,e.pageIndex+e.pageSize)}}}),E=N.actions,A=E.switchUnit,P=E.setPageSize,D=E.prevPage,U=E.nextPage,W=E.activate,J=function(e){return e.display.unit},B=function(e){return e.display.pageSize},R=function(e){return e.display.pageIndex},_=function(e){return e.display.active},q={data:z,display:N.reducer},G=Object(l.a)({reducer:q}),L=a(271),T=a(259),X=Object(T.a)({palette:{primary:{light:"#90CAF9",main:"#42A5F5",dark:"#1E88E5"},secondary:{light:"#F48FB1",main:"#EC407A",dark:"#D81B60"}}}),$=a(270),H=a(268),K=a(272),Q=a(261),V=a(260),Y=a(277),Z=a(262),ee=a(274),te=a(2),ae=Object(V.a)((function(){return{row:{width:"100%",justifyContent:"space-around"}}})),ne=function(){var e=ae(),t=Object(s.c)(J),a=Object(s.b)();return Object(te.jsx)(Q.a,{item:!0,container:!0,xs:12,md:10,lg:8,children:Object(te.jsxs)(Y.a,{"aria-label":"unit",name:"weather-unit",value:t,onChange:function(e){a(A(e.target.value))},className:e.row,row:!0,children:[Object(te.jsx)(Z.a,{value:"F",control:Object(te.jsx)(ee.a,{color:"primary"}),label:"Farenheit"}),Object(te.jsx)(Z.a,{value:"C",control:Object(te.jsx)(ee.a,{color:"primary"}),label:"Celsius"})]})})},ce=a(267),re=a(62),ie=a(273),oe=a(263),se=a(264),le=function(){var e,t=Object(s.c)(R),a=Object(s.c)(B),n=Object(s.c)(C),c=Object(s.b)(),r=null===n||void 0===n||null===(e=n.list)||void 0===e?void 0:e.length;return Object(te.jsxs)(Q.a,{container:!0,item:!0,children:[r&&t>0&&Object(te.jsx)(ie.a,{"aria-label":"Previous page",color:"primary",onClick:function(){c(D({length:r}))},children:Object(te.jsx)(oe.a,{fontSize:"large"})}),Object(te.jsx)(K.a,{flexGrow:1}),r&&t+a<r&&Object(te.jsx)(ie.a,{"aria-label":"Next page",color:"primary",onClick:function(){c(U({length:r}))},children:Object(te.jsx)(se.a,{fontSize:"large"})})]})},ue=a(265),je=a(266),de=a(278),pe=a(237),be=-273.15,he=function(e){var t=Math.round(e+be);return-0===t?0:t},Oe=function(e){var t=Math.round(9*(e+be)/5+32);return-0===t?0:t},fe=Object(V.a)((function(e){return{root:{padding:e.spacing(1),flexShrink:0,cursor:"pointer"},active:{borderColor:e.palette.primary.main,borderWidth:"3px",borderStyle:"solid"},cardContent:{position:"relative"},weather:{backgroundColor:"#CFD8DC",margin:"4px",width:e.spacing(4),height:e.spacing(4)},avgWeather:{position:"absolute",margin:0,top:e.spacing(2),right:e.spacing(2),width:e.spacing(8),height:e.spacing(8)}}})),me=function(e){var t=e.day,a=e.data,n=e.active,r=e.onActivate,i=fe(),o=Object(s.c)(B),l=Object(s.c)(J),u=Object(c.useState)(0),j=Object(x.a)(u,2),d=j[0],p=j[1],b=Object(c.useMemo)((function(){return a.reduce((function(e,t){return e+t.main.temp}),0)/a.length}),[a]),h=Object(c.useMemo)((function(){var e={};a.forEach((function(t){var a=t.weather[0];e[a.main]=e[a.main]||{count:0,types:{}},e[a.main].count++,e[a.main].types[a.icon]||(e[a.main].types[a.icon]={count:0,weather:a}),e[a.main].types[a.icon].count++}));var t=Object.values(e).sort(F);return Object.values(t[0].types).sort(F)[0].weather}),[a]);return Object(c.useEffect)((function(){p("F"===l?Oe(b):he(b))}),[b,l]),Object(te.jsx)(Q.a,{item:!0,xs:12/o,className:i.root,onClick:function(){"function"===typeof r&&r()},children:Object(te.jsx)(ue.a,{raised:n,className:n?i.active:"","data-testid":"card",children:Object(te.jsx)(je.a,{className:i.cardContent,children:Object(te.jsxs)(K.a,{width:1,p:1,children:[Object(te.jsx)(de.a,{alt:h.description,src:"http://openweathermap.org/img/wn/".concat(h.icon,"@2x.png"),className:"".concat(i.weather," ").concat(i.avgWeather)}),Object(te.jsx)(K.a,{width:1,px:1,pb:1,children:Object(te.jsxs)(Q.a,{container:!0,direction:"column",alignItems:"center",children:[Object(te.jsx)(pe.a,{variant:"subtitle1",children:"Temp"}),Object(te.jsxs)(pe.a,{variant:"h4",children:[d,l]})]})}),Object(te.jsx)(K.a,{width:1,px:1,py:1,children:Object(te.jsxs)(Q.a,{container:!0,direction:"column",alignItems:"center",children:[Object(te.jsx)(pe.a,{variant:"subtitle1",children:"Date"}),Object(te.jsx)(pe.a,{variant:"h4",children:t})]})}),Object(te.jsx)(K.a,{width:1,px:1,pt:1,children:Object(te.jsxs)(Q.a,{children:[Object(te.jsx)(Q.a,{container:!0,alignItems:"center",justify:"center",children:a.slice(0,Math.floor(a.length/2)).map((function(e,t){return Object(te.jsx)(de.a,{alt:e.weather[0].description,src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),className:i.weather},"".concat(e.weather[0].id,"-").concat(t))}))}),Object(te.jsx)(Q.a,{container:!0,alignItems:"center",justify:"center",children:a.slice(Math.floor(a.length/2)).map((function(e,t){return Object(te.jsx)(de.a,{alt:e.weather[0].description,src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),className:i.weather},"".concat(e.weather[0].id,"-").concat(t))}))})]})})]})})})})},xe=Object(V.a)((function(){return{wrapper:{overflow:"hidden",width:"100%"},cards:{flexWrap:"nowrap",transition:"transform 0.5s cubic-bezier(0.3, -0.5, 0.7, 1.5)"}}})),ge=function(){var e,t=Object(re.a)(),a=xe(),n=Object(ce.a)(t.breakpoints.up("lg")),r=Object(ce.a)(t.breakpoints.up("md")),i=Object(ce.a)(t.breakpoints.up("sm")),o=Object(s.c)(C),l=Object(s.c)(R),u=Object(s.c)(B),j=Object(s.c)(_),d=Object(s.b)();return Object(c.useEffect)((function(){d(P(n?3:r?2:1))}),[n,r,i,d]),Object(te.jsxs)(Q.a,{container:!0,direction:"column",children:[Object(te.jsx)(le,{}),Object(te.jsx)(K.a,{className:a.wrapper,children:Object(te.jsx)(Q.a,{container:!0,className:a.cards,style:{transform:"translateX(".concat(-100*l/u,"%)")},children:(null===o||void 0===o||null===(e=o.list)||void 0===e?void 0:e.length)&&o.list.map((function(e,t){var a=e.day,n=e.data;return Object(te.jsx)(me,{day:a,data:n,active:j===t,onActivate:function(){return function(e){d(W(e))}(t)}},a)}))})})]})},ve=a(238),we=a(110),ye=Object(V.a)((function(e){var t,a;return{root:(t={},Object(u.a)(t,e.breakpoints.up("xs"),{width:"100%"}),Object(u.a)(t,e.breakpoints.up("md"),{width:"75%"}),t),container:(a={},Object(u.a)(a,e.breakpoints.up("xs"),{height:"25vh"}),Object(u.a)(a,e.breakpoints.up("sm"),{height:"30vh"}),Object(u.a)(a,e.breakpoints.up("md"),{height:"40vh"}),a)}})),ke=function(){var e=Object(re.a)(),t=ye(),a=Object(s.c)(C),n=Object(s.c)(J),r=Object(s.c)(_),i=Object(c.useState)(),o=Object(x.a)(i,2),l=o[0],u=o[1],j=Object(c.useMemo)((function(){var e;if(null===a||void 0===a||null===(e=a.list)||void 0===e?void 0:e.length)return a.list[r].data.map((function(e){var t=function(e){var t=e.split(" ")[1].split(":").map(v),a=Object(x.a)(t,2),n=a[0],c=a[1];return n>=12?"".concat(n>12?n-12:n,":").concat("".concat(c).padStart(2,"0")," PM"):"".concat(0===n?"00":n,":").concat("".concat(c).padStart(2,"0")," AM")}(e.dt_txt);return{temp:"F"===n?Oe(e.main.temp):he(e.main.temp),time:t}}))}),[a,n,r]);return Object(c.useEffect)((function(){j&&u({labels:j.map((function(e){var t=e.temp;return"".concat(t).concat(n)})),datasets:[{data:j.map((function(e){return e.temp}))}]})}),[j,n]),Object(te.jsx)(K.a,{py:4,className:t.root,children:Object(te.jsx)(ve.a,{className:t.container,children:l&&Object(te.jsx)(we.a,{data:l,options:{maintainAspectRatio:!1,scales:{y:{display:!1},x:{ticks:{font:{size:16}}}},elements:{bar:{backgroundColor:e.palette.primary.main}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,callbacks:{title:function(){return""},label:function(e){var t=j[e.dataIndex],a=t.time,c=t.temp;return"".concat(a," - ").concat(c).concat(n)}}}}}})})})},Ie=Object(V.a)((function(){return{root:{position:"absolute"}}})),Se=function(){var e=Ie(),t=Object(s.c)(I);return Object(te.jsx)(H.a,{in:!t,timeout:{enter:2e3},children:Object(te.jsx)(K.a,{py:2,display:"flex",flexDirection:"column",alignItems:"center",children:Object(te.jsxs)(Q.a,{container:!0,item:!0,direction:"column",alignItems:"center",xs:10,className:e.root,children:[Object(te.jsx)(ne,{}),Object(te.jsx)(ge,{}),Object(te.jsx)(ke,{})]})})})},Ce=a(269),ze=Object(V.a)((function(){return{root:{height:"100vh",position:"absolute"}}})),Me=function(){var e=ze(),t=Object(s.c)(I);return Object(te.jsx)(H.a,{in:t,timeout:{enter:10,exit:1e3},children:Object(te.jsxs)(Q.a,{container:!0,alignItems:"center",justify:"center",direction:"column",className:e.root,children:[Object(te.jsx)(K.a,{p:2,children:Object(te.jsx)(Ce.a,{size:60})}),Object(te.jsx)(pe.a,{variant:"h4",children:"Loading..."})]})})},Fe=a(276),Ne=a(275),Ee=function(){var e=Object(s.c)(S),t=Object(c.useState)(!1),a=Object(x.a)(t,2),n=a[0],r=a[1],i=Object(c.useState)(""),o=Object(x.a)(i,2),l=o[0],u=o[1],j=function(){r(!1)};return Object(c.useEffect)((function(){var t;e&&(r(!0),u(null!==(t=e.message)&&void 0!==t?t:"An error occured. Please refresh and try again."))}),[e]),Object(te.jsx)(Fe.a,{open:n,onClose:j,children:Object(te.jsx)(Ne.a,{variant:"filled",severity:"error",onClose:j,children:l})})},Ae=function(){var e=Object(s.b)();return Object(c.useEffect)((function(){e(y())}),[e]),Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)($.a,{}),Object(te.jsx)(Me,{}),Object(te.jsx)(Se,{}),Object(te.jsx)(Ee,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(te.jsx)(r.a.StrictMode,{children:Object(te.jsx)(s.a,{store:G,children:Object(te.jsx)(L.a,{theme:X,children:Object(te.jsx)(Ae,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[235,1,2]]]);
//# sourceMappingURL=main.fb685834.chunk.js.map